<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report name" pageWidth="595" pageHeight="842" columnWidth="535" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="545f3e33-0227-4a07-9282-078b20b0fe6c">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 3_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 4_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 5_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 6_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 7_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 8_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 9">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 9_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 9_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 9_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 10">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 10_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 10_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 10_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="Semanas" uuid="86ca8c2c-0a3d-449a-8955-8d878f69b217">
		<parameter name="cod_semana" class="java.lang.String"/>
		<queryString>
			<![CDATA[SELECT
sum (farmac_asic_producto_existencia.cantidad_existencia) as cantidad_existencia,
farmac_asic_producto_existencia.semana_estadistica
FROM
farmac_asic_producto_existencia
INNER JOIN config_cod_producto ON farmac_asic_producto_existencia.producto_id = config_cod_producto.id
WHERE
config_cod_producto.codigo = $P{cod_semana}
GROUP BY
farmac_asic_producto_existencia.semana_estadistica
ORDER BY
farmac_asic_producto_existencia.semana_estadistica DESC
LIMIT 4]]>
		</queryString>
		<field name="cantidad_existencia" class="java.lang.Object"/>
		<field name="semana_estadistica" class="java.lang.Object"/>
	</subDataset>
	<subDataset name="Grafico" uuid="b01159a4-0fd8-446e-a67b-b65dccb6a72d">
		<parameter name="cod_grafico" class="java.lang.String"/>
		<queryString>
			<![CDATA[SELECT
sum (farmac_asic_producto_existencia.cantidad_existencia) as existencia,
farmac_asic_producto_existencia.semana_estadistica as semana
FROM
farmac_asic_producto_existencia
INNER JOIN config_cod_producto ON farmac_asic_producto_existencia.producto_id = config_cod_producto.id
WHERE
config_cod_producto.codigo = $P{cod_grafico}
GROUP BY
farmac_asic_producto_existencia.semana_estadistica
ORDER BY
farmac_asic_producto_existencia.semana_estadistica ASC
LIMIT 4]]>
		</queryString>
		<field name="existencia" class="java.lang.Object"/>
		<field name="semana" class="java.lang.Object"/>
	</subDataset>
	<subDataset name="lotes" uuid="a627e7a0-5c94-4627-87bb-7b6167ab503c">
		<parameter name="cod_lotes" class="java.lang.String"/>
		<queryString>
			<![CDATA[SELECT
config_cod_lote.nombre AS lote,
config_cod_lote.fecha_vence,
farmac_asic_producto_existencia.cantidad_existencia,
config_cod_farmacia.nombre as farmacia
FROM
config_cod_lote
INNER JOIN farmac_asic_producto_existencia ON farmac_asic_producto_existencia.lote_id = config_cod_lote.id
INNER JOIN config_cod_producto ON config_cod_lote.producto_id = config_cod_producto.id AND farmac_asic_producto_existencia.producto_id = config_cod_producto.id
INNER JOIN config_cod_farmacia ON farmac_asic_producto_existencia.farmacia_id = config_cod_farmacia.id
WHERE
config_cod_producto.codigo = $P{cod_lotes} AND
farmac_asic_producto_existencia.semana_estadistica = 17 AND farmac_asic_producto_existencia.cantidad_existencia > 0
ORDER BY
config_cod_lote.fecha_vence DESC]]>
		</queryString>
		<field name="lote" class="java.lang.Object"/>
		<field name="fecha_vence" class="java.lang.Object"/>
		<field name="cantidad_existencia" class="java.lang.Object"/>
		<field name="farmacia" class="java.lang.Object"/>
	</subDataset>
	<subDataset name="Servicios" uuid="fb31141f-4514-4725-8955-8177d03c657e">
		<parameter name="cod_servicio" class="java.lang.String"/>
		<queryString>
			<![CDATA[SELECT
config_cod_tipo_centro.sigla centro,
config_cod_servicio.nombre AS servicios,
farmac_asic_producto_existencia.cantidad_existencia as cantidad
FROM
config_cod_servicio ,
config_cod_tipo_centro
INNER JOIN config_tipo_centro_servicio ON config_tipo_centro_servicio.tipo_centro_id = config_cod_tipo_centro.id AND config_tipo_centro_servicio.servicio_id = config_cod_servicio.id ,
config_cod_producto
INNER JOIN config_producto_servicio ON config_producto_servicio.servicio_id = config_cod_servicio.id AND config_producto_servicio.producto_id = config_cod_producto.id
LEFT JOIN farmac_asic_producto_existencia ON farmac_asic_producto_existencia.servicio_id = config_cod_servicio.id AND farmac_asic_producto_existencia.producto_id = config_cod_producto.id AND farmac_asic_producto_existencia.tipo_centro_id = config_cod_tipo_centro.id
WHERE
config_cod_producto.codigo = $P{cod_servicio}  AND
farmac_asic_producto_existencia.semana_estadistica = 17 AND
farmac_asic_producto_existencia.servicio_id > 0]]>
		</queryString>
		<field name="centro" class="java.lang.Object"/>
		<field name="servicios" class="java.lang.Object"/>
		<field name="cantidad" class="java.lang.Object"/>
	</subDataset>
	<parameter name="cod_producto" class="java.lang.String">
		<parameterDescription><![CDATA[]]></parameterDescription>
	</parameter>
	<parameter name="oficial" class="java.lang.String"/>
	<parameter name="tratamiento" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT DISTINCT
upper(config_cod_producto.descripcion) AS descripcion,
config_cod_asic.nombre AS asic,
config_cod_farmacia.nombre AS farmacia,
config_cod_producto.codigo,
upper(config_cod_unidad_medida.nombre) AS medida,
config_cod_provincia.nombre AS estado
FROM
config_cod_asic
INNER JOIN config_cod_farmacia ON config_cod_farmacia.asic_id = config_cod_asic.id ,
config_cod_producto
INNER JOIN config_cod_unidad_medida ON config_cod_producto.unidad_medida_id = config_cod_unidad_medida.id AND config_cod_producto.unidad_medida_almacen_id = config_cod_unidad_medida.id
INNER JOIN config_cod_provincia ON config_cod_asic.provincia_id = config_cod_provincia.id AND config_cod_farmacia.provincia_id = config_cod_provincia.id
WHERE
config_cod_producto.codigo = $P{cod_producto}]]>
	</queryString>
	<field name="descripcion" class="java.lang.Object"/>
	<field name="asic" class="java.lang.Object"/>
	<field name="farmacia" class="java.lang.Object"/>
	<field name="codigo" class="java.lang.Object"/>
	<field name="medida" class="java.lang.Object"/>
	<field name="estado" class="java.lang.Object"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement x="123" y="9" width="393" height="23" uuid="a85c0c21-5a01-41ed-8529-d586f83b76a1"/>
				<textElement>
					<font size="16" isBold="true"/>
				</textElement>
				<text><![CDATA[Sistema para Cooperación Médica en el Exterior]]></text>
			</staticText>
			<staticText>
				<reportElement x="226" y="43" width="128" height="20" uuid="bf61949a-5175-40a8-9759-68574c8ec7de"/>
				<textElement>
					<font size="12" isBold="true"/>
				</textElement>
				<text><![CDATA[Ficha de producto]]></text>
			</staticText>
			<textField pattern="d/M/yyyy">
				<reportElement x="104" y="43" width="100" height="20" uuid="bfc22b68-58dc-4bcc-badc-7abac7cfdb0e"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[new java.util.Date()]]></textFieldExpression>
			</textField>
		</band>
	</title>
	<pageHeader>
		<band height="79" splitType="Stretch">
			<staticText>
				<reportElement x="9" y="11" width="54" height="20" uuid="940ee73c-e867-42a4-a5e1-0041ddba84f3"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Código: ]]></text>
			</staticText>
			<staticText>
				<reportElement x="9" y="31" width="54" height="20" uuid="27a30bee-8871-4c65-9eb4-f3cdfe901d8b"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Nombre:]]></text>
			</staticText>
			<staticText>
				<reportElement x="9" y="51" width="54" height="20" uuid="fe6d35c8-0b58-4dc8-b0fe-7c2ca9562328"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Oficial:]]></text>
			</staticText>
			<textField>
				<reportElement x="62" y="11" width="100" height="20" uuid="cbc5fca2-7ffe-4d9e-a047-5a54f412d99a"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{codigo}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="64" y="33" width="306" height="20" uuid="1cbe683f-d7aa-4721-8c26-176a23b9b9d2"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="391" y="8" width="90" height="20" uuid="6437f3c3-9fdd-47a6-9ad8-69f3d8e2b5e6"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Unidad medida:]]></text>
			</staticText>
			<textField>
				<reportElement x="478" y="8" width="74" height="20" uuid="7781b2fd-d1d4-486e-b7e3-b15837d8bb27"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{medida}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="391" y="37" width="100" height="20" uuid="ed9be32b-eff8-4ac5-8e83-1d8a296233b3"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[Tratamiento lote:]]></text>
			</staticText>
			<textField>
				<reportElement x="63" y="51" width="100" height="20" uuid="3a61b67a-bc8d-49f3-a2a7-7746e28d239f"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{oficial}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="492" y="37" width="50" height="20" uuid="156d513b-192a-43e0-9e00-60522d1e7711"/>
				<textElement>
					<font size="11"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{tratamiento}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="399" splitType="Stretch">
			<staticText>
				<reportElement x="9" y="33" width="217" height="20" uuid="e79759b0-7c28-4e51-bc52-908c31cbe33a"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<text><![CDATA[NO POSEE EXISTENCIA EL PRODUCTO:]]></text>
			</staticText>
			<textField>
				<reportElement x="226" y="33" width="316" height="20" uuid="1f25f75e-bcaf-40a9-a1a8-9c250af95411"/>
				<textElement>
					<font size="11" isBold="true"/>
				</textElement>
				<textFieldExpression><![CDATA[$F{descripcion}]]></textFieldExpression>
			</textField>
		</band>
	</columnHeader>
	<detail>
		<band height="22" splitType="Stretch"/>
	</detail>
	<columnFooter>
		<band height="15" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="11" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="8" splitType="Stretch"/>
	</summary>
</jasperReport>
